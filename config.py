"""
ููู ุงูุฅุนุฏุงุฏุงุช ุงููุฑูุฒู
ูุญุชูู ุนูู ุฌููุน ุงูุฅุนุฏุงุฏุงุช ุงููุงุจูุฉ ููุชุฎุตูุต
"""

import os
from dotenv import load_dotenv

# ุชุญููู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
load_dotenv()


# ==========================================
# --- ุฅุนุฏุงุฏุงุช ุงูุจูุช ---
# ==========================================

class BotConfig:
    """ุฅุนุฏุงุฏุงุช ุงูุจูุช"""
    
    # ุงูุชููู
    TOKEN = os.getenv('TELEGRAM_BOT_TOKEN')
    
    # ูุนุฑูุงุช ุงููุงูููู
    ADMINS_ID_STR = os.getenv('ADMINS_ID', '')
    ADMINS_ID = [
        int(admin_id.strip()) 
        for admin_id in ADMINS_ID_STR.split(',') 
        if admin_id.strip().isdigit()
    ]
    
    # ุงุณู ุงูุจูุช
    BOT_NAME = "ุจูุช ุงูุฃุฐูุงุฑ"
    
    # ูุตู ุงูุจูุช
    BOT_DESCRIPTION = "ุจูุช ูุชุทูุฑ ููุดุฑ ุงูุฃุฐูุงุฑ ุงูุฅุณูุงููุฉ ุชููุงุฆูุงู"


# ==========================================
# --- ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ---
# ==========================================

class DatabaseConfig:
    """ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช"""
    
    # URL ูุงุนุฏุฉ ุงูุจูุงูุงุช
    DATABASE_URL = os.getenv('DATABASE_URL', 'sqlite:///adhkar_bot.db')
    
    # ุฅุนุฏุงุฏุงุช SQLite
    SQLITE_POOL_SIZE = 5
    SQLITE_MAX_OVERFLOW = 10
    
    # ุฅุนุฏุงุฏุงุช ุงูุงุชุตุงู
    POOL_RECYCLE = 3600
    POOL_PRE_PING = True


# ==========================================
# --- ุฅุนุฏุงุฏุงุช ุงูุณุฌูุงุช ---
# ==========================================

class LogConfig:
    """ุฅุนุฏุงุฏุงุช ุงูุณุฌูุงุช"""
    
    # ูุณุชูู ุงูุณุฌู
    LOG_LEVEL = os.getenv('LOG_LEVEL', 'INFO')
    
    # ูุณุงุฑ ููู ุงูุณุฌู
    LOG_FILE = 'logs/bot.log'
    
    # ุตูุบุฉ ุงูุณุฌู
    LOG_FORMAT = "{time:YYYY-MM-DD HH:mm:ss} | {level: <8} | {message}"
    
    # ุญุฌู ููู ุงูุณุฌู (ุจุงูููุฌุงุจุงูุช)
    LOG_FILE_SIZE = 10
    
    # ุนุฏุฏ ูููุงุช ุงูุณุฌู ุงููุญููุธุฉ
    LOG_BACKUP_COUNT = 5


# ==========================================
# --- ุฅุนุฏุงุฏุงุช ุงูุฃุฐูุงุฑ ---
# ==========================================

class AdhkarConfig:
    """ุฅุนุฏุงุฏุงุช ุงูุฃุฐูุงุฑ"""
    
    # ูุฆุงุช ุงูุฃุฐูุงุฑ
    CATEGORIES = {
        'sabah': {
            'name': 'ุงูุตุจุงุญ',
            'start': '06:00',
            'end': '12:00',
            'file': 'azkar_sabah.txt',
            'emoji': 'โ๏ธ'
        },
        'masaa': {
            'name': 'ุงููุณุงุก',
            'start': '18:00',
            'end': '22:00',
            'file': 'azkar_masaa.txt',
            'emoji': '๐'
        },
        'aam': {
            'name': 'ุงูุนุงู',
            'start': None,
            'end': None,
            'file': 'azkar_aam.txt',
            'emoji': '๐'
        }
    }
    
    # ุงููุชุฑุฉ ุงูุงูุชุฑุงุถูุฉ ูููุดุฑ (ุฏูุงุฆู)
    DEFAULT_INTERVAL = 60
    
    # ุงูุญุฏ ุงูุฃุฏูู ูููุชุฑุฉ (ุฏูุงุฆู)
    MIN_INTERVAL = 1
    
    # ุงูุญุฏ ุงูุฃูุตู ูููุชุฑุฉ (ุฏูุงุฆู)
    MAX_INTERVAL = 1000
    
    # ูุชุฑุฉ ุงูุชุญูู ูู ุงููุดุฑ (ุซูุงูู)
    CHECK_INTERVAL = 30


# ==========================================
# --- ุฅุนุฏุงุฏุงุช ุงูุจุซ ---
# ==========================================

class BroadcastConfig:
    """ุฅุนุฏุงุฏุงุช ุงูุจุซ"""
    
    # ุงูุชุฃุฎูุฑ ุจูู ุงูุฑุณุงุฆู (ุซุงููุฉ)
    MESSAGE_DELAY = 0.3
    
    # ุนุฏุฏ ูุญุงููุงุช ุงูุฅุฑุณุงู
    RETRY_COUNT = 3
    
    # ุงูุชุฃุฎูุฑ ุจูู ุงููุญุงููุงุช (ุซุงููุฉ)
    RETRY_DELAY = 5


# ==========================================
# --- ุฅุนุฏุงุฏุงุช ุงูุฃูุงู ---
# ==========================================

class SecurityConfig:
    """ุฅุนุฏุงุฏุงุช ุงูุฃูุงู"""
    
    # ุชูุนูู ุงูุชุญูู ูู ุงูุงุดุชุฑุงู
    ENABLE_SUBSCRIPTION_CHECK = True
    
    # ุชูุนูู ูุนุฏู ุงูุชุญุฏูุซ (Rate Limiting)
    ENABLE_RATE_LIMITING = True
    
    # ุญุฏ ูุนุฏู ุงูุชุญุฏูุซ (ุฑุณุงุฆู ููู ุซุงููุฉ)
    RATE_LIMIT = 10
    
    # ุชูุนูู ุชุณุฌูู ุงูุฃูุดุทุฉ ุงูุญุณุงุณุฉ
    LOG_SENSITIVE_ACTIONS = True


# ==========================================
# --- ุฅุนุฏุงุฏุงุช ุงููุงุฌูุฉ ---
# ==========================================

class UIConfig:
    """ุฅุนุฏุงุฏุงุช ุงููุงุฌูุฉ"""
    
    # ุญุฏ ุฃูุตู ูุนุฏุฏ ุงูุฃุฒุฑุงุฑ ูู ุงูุตู
    BUTTONS_PER_ROW = 2
    
    # ุญุฏ ุฃูุตู ูุนุฏุฏ ุงูุฃุฒุฑุงุฑ ูู ุงูุตูุญุฉ
    BUTTONS_PER_PAGE = 10
    
    # ุงุณุชุฎุฏุงู ุงูุฃููููุงุช
    USE_EMOJIS = True
    
    # ุงุณุชุฎุฏุงู HTML ูู ุงูุฑุณุงุฆู
    USE_HTML = True


# ==========================================
# --- ุฅุนุฏุงุฏุงุช ุงูุฃุฏุงุก ---
# ==========================================

class PerformanceConfig:
    """ุฅุนุฏุงุฏุงุช ุงูุฃุฏุงุก"""
    
    # ุนุฏุฏ ุงูุนูุงู ุงููุชุฒุงูููู
    WORKER_COUNT = 4
    
    # ุญุฌู ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ
    CACHE_SIZE = 1000
    
    # ูุฏุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ (ุซุงููุฉ)
    CACHE_TTL = 3600
    
    # ุชูุนูู ุถุบุท ุงูุจูุงูุงุช
    ENABLE_COMPRESSION = True


# ==========================================
# --- ุฅุนุฏุงุฏุงุช ุงูุชุทููุฑ ---
# ==========================================

class DevelopmentConfig:
    """ุฅุนุฏุงุฏุงุช ุงูุชุทููุฑ"""
    
    # ูุถุน ุงูุชุทููุฑ
    DEBUG = os.getenv('DEBUG', 'False').lower() == 'true'
    
    # ุชูุนูู ุงูุณุฌูุงุช ุงูููุตูุฉ
    VERBOSE_LOGGING = DEBUG
    
    # ุชูุนูู ุงูุงุฎุชุจุงุฑ
    TESTING = False


# ==========================================
# --- ุฏุงูุฉ ุงูุญุตูู ุนูู ุงูุฅุนุฏุงุฏุงุช ---
# ==========================================

def get_config():
    """ุงูุญุตูู ุนูู ุฌููุน ุงูุฅุนุฏุงุฏุงุช"""
    return {
        'bot': BotConfig,
        'database': DatabaseConfig,
        'log': LogConfig,
        'adhkar': AdhkarConfig,
        'broadcast': BroadcastConfig,
        'security': SecurityConfig,
        'ui': UIConfig,
        'performance': PerformanceConfig,
        'development': DevelopmentConfig,
    }
